函数（function）是具名的计算单元（named compute unit），在 C 和 C++ 中与子程序（subroutine）是不加区别的，指的就是执行特定任务的程序指令，它们被打包成一个单元。函数可以用在此任务需要执行的任何地方。

函数可以定义在程序中或者分离定义在库（library）中（定义在库中的代码可以被多个程序复用）。在不同的编程语言中，它具有不同的名字 —— 过程（procedure）、函数（function）、子程序（routine）、方法（method）、子程序（subprogram），以及更加通用的术语**调用单元**（callable unit）。

函数可以在程序的一次执行中从多个不同的地方以及多个不同的时间被调用（call），当计算完成时又返回到调用的下一条指令。Maurice Wilkes 等人称之为闭合子程序（closed subroutine）以区别于宏（macro）或者叫开放子程序（open subroutine），它们之间的区别在于函数有一个单独的作用域，调用时将实参进行求值然后初始化这个独立计算区域中的形参。而宏则是执行文本替换，实际上不存在调用的概念，将实参表达式替换每一个对应的形参，因而也会求值多次。只有闭合子程序才能支持递归调用。

函数的好处在于提高代码的密度（code density），复用代码可以有效的降低开发和维护大程序的成本，同时提高代码的质量和可靠性。面向对象编程（object-oriented programming）是建立在将函数与数据拼合在一起的原则上的。

从编译器的角度来看，程序就是一系列的函数的调用。

函数有两种功用，其一是数学函数（mathematical functions）的概念，就是纯计算，计算的结果完全由输入的参数决定，如：计算对数。其二是调用产生副作用（side effect）如：修改数据结构或者读写 I/O 设备，创建文件等。相同的参数在不同时期的调用结果很可能是不一样的，具体则依赖于当时的程序状态。

函数可以递归的调用的特性，使得可以直接将数学归纳（mathematical induction）和分治算法（divide and conquer algorithms）实现为程序代码。

## 6.1 函数基础

函数由返回类型、名字和形参（parameters）列表以及函数体构成。参数列表可能有一个或多个参数，也可能没有参数，参数之间用逗号分隔。函数的指令放在一个语句块中，被称为函数体（function body）。

执行函数用调用操作符（call operator），调用操作符是一对括号，调用操作符以函数或者函数指针为操作数，在括号则指定逗号分隔的实参（arguments），实参被用于初始化形参，初始化的过程与变量的初始化是一样的。调用表达式的类型是返回类型。

函数调用时将形参初始化为实参，并且将控制权转移到被调用的函数，此时调用函数（calling function）的执行被暂停，被调用函数（called function）开始执行。被调用函数执行的第一步是隐式定义并初始化参数。然后执行函数体。最后当函数遇到 return 语句或者执行到函数体尾部时自动返回控制权到调用函数，并且返回 return 语句中的值，这个值被用于初始化调用表达式的结果。

### 6.1.1 形参和实参

实参用于初始化形参，C++ 是按照参数顺序进行初始化的，并且不保证实参的求值顺序的。传入的参数必须与形参的类型匹配，并且个数也是必须一致的，因而，所有形参都保证一定会初始化。与初始化一样，允许从参数到形参的转换，只要这种转换是合法的。

C++ 中可以用一对空括号表示来表示没有参数，C 中早年必须在括号中写 void 来表示没有参数。如
````cpp
void f() {/*...*/}
void f(void) {/*...*/}
````
形参列表就是一系列用逗号分隔的变量声明，变量声明之间是独立的，因而，即便是类型相同的参数也需要重复书写类型名。没有形参的名字是一样的，函数体内的顶层作用域中的本地变量也不会与形参同名。这与同一作用域中不允许同名变量是一样的。

偶尔函数的参数不使用，这种参数可以不命名，即便此参数不命名，当调用时还是必须传入对应的参数。

### 6.1.2 返回类型

返回类型可以是除数组类型和函数类型外的任何类型，可以是 void 类型表示没有没有返回值。虽然不能返回数组和函数，但是可以返回数组的指针和引用，以及函数指针。

### 6.1.3 本地变量

C++ 中的名字有作用域和生命周期（lifetimes）。作用域是程序文本中哪些位置可以看到此名字。生命周期是对象在程序运行期间存活的时期。函数体是一个语句块，因而生成一个新的作用域。形参和在此作用域中定义的变量被称为本地变量（local variables），本地变量会隐藏外部定义的变量。定义在任何函数外的变量在程序的整个执行过程中都存在，这种变量当程序启动时创建，直到程序中止时销毁。

函数中有一种本地变量是自动对象（automatic objects），这种变量当函数控制通过此变量定义时创建，当离开定义变量的语句块时销毁。当离开语句块时，其中定义的自动对象值是未定义的。参数是自动对象，当函数开始时将分配内存给参数，当函数结束时销毁。自动对象中的函数参数被初始化为函数实参，自动对象中的本地变量被初始化为定义时给出的初始值，或者被默认初始化，意味着未初始化的内置类型对象具有未定义值。

将本地变量定义为 static 将得到一个本地静态对象（local static object），本地静态对象将在第一次遇到对象的定义时初始化，当函数结束时对象不会被销毁，只有当程序结束时才会销毁。在多次调用函数之间，变量的值沿用上次调用时的最终值。当本地静态对象没有显式初始化时，将执行值初始化，意味着内置类型的本地静态变量将被初始化为 0。

### 6.1.4 函数声明

函数在使用前必须先声明，这样函数才会可见。函数与变量一样只能定义一次，但是可以声明多次。一个函数可以在没有定义的情况下声明，但想要调用此函数必须得有定义才行。函数声明与函数定义一样除了没有函数体之外。函数声明可以省略参数的名字只留下类型。函数声明分为三个部分：返回类型、函数名字和参数类型，这是调用函数需要知道的全部信息，这个三个元素合起来称为函数原型（function prototype）。

函数声明最好是放在头文件中，以保证所有引入的地方都保持一致，改变声明也仅需改变一个地方。实现函数的源文件也需要包含函数声明，这样可以校验定义和声明是否一致。

### 6.1.5 分离编译
## 6.2 参数传递
### 6.2.1 值传递
### 6.2.2. 引用传递
### 6.2.3 const 形参和实参
### 6.2.4 数组形参
### 6.2.5 main：处理命令行参数
### 6.2.6 不定形参
## 6.3 返回类型和 return 语句